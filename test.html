<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<style>
    #homework-container {
        font-family: Geneva, Arial, Helvetica, sans-serif;
    }

    #homework-container input {
        border-radius: 5px;
        border: 1px solid #ccc;
        padding: 5px;
        margin: 5px 0;
    }

    #homework-container table {
        width: 100%;
    }

    #homework-container table td,
    #homework-container table th {
        padding: 5px;
        text-align: left;
    }

    #homework-container tbody tr:nth-child(odd) {
        background: #ddd;
    }
</style>
<div id="homework-container">
    <div id="filter-block">
        Поиск cookie: <input type="text" id="filter-name-input" placeholder="имя cookie">
    </div>
    <hr>
    <div id="add-block">
        Добавить cookie:<br>
        <input type="text" id="add-name-input" placeholder="имя cookie"><br>
        <input type="text" id="add-value-input" placeholder="значение cookie"><br>
        <button id="add-button">добавить cookie</button>
    </div>
    <hr>
    <div id="list-block">
        Доступные cookie:
        <table id="list-table">
            <thead>
            <tr>
                <th>имя</th>
                <th>значение</th>
                <th>удалить</th>
            </tr>
            </thead>
            <tbody>
            <!-- tr добавлять сюда -->
            </tbody>
        </table>
    </div>
</div>

<script>
    function createCookie(name, value) {
        document.cookie = `${name}=${value}`;
    }
    function deleteCookie(name) {
        document.cookie = `${name}=; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;
    }

    let homeworkContainer = document.querySelector('#homework-container');
    let filterNameInput = homeworkContainer.querySelector('#filter-name-input');
    let addNameInput = homeworkContainer.querySelector('#add-name-input');
    let addValueInput = homeworkContainer.querySelector('#add-value-input');
    let addButton = homeworkContainer.querySelector('#add-button');
    let listTable = homeworkContainer.querySelector('#list-table tbody');

    let myObj = {
        listCookies: document.cookie.split('; '),
        cookies: function(){
            return this.listCookies.reduce((prev,count)=>{
                let [name, value] = count.split('=');
                prev[name]=value;
                return prev;
            },{});
        },
        tableList: function () {
            listTable.innerHTML='';
            for(let item in this.cookies() ){
                this.createElTr(listTable,item,myObj.cookies()[item]);
            }
        },
        searchTable: function(arg){
            for(let i=0; i<listTable.children.length;i++){
                if(listTable.children[i].firstChild.innerText === arg) {
                    return listTable.children[i];
                }
            }
            return false;
        },
        createElTr: function(elem,name,value) {
            let tr = document.createElement('tr');
            this.createElTd(tr,name);
            this.createElTd(tr,value);
            this.createElTd(tr,`<button class="delet deleteCookies" data="${name}">удалить</button>`);
            elem.appendChild(tr);
        },
        createElTd: function(elem,param) {
            let td = document.createElement('td')
            td.innerHTML=param;
            elem.appendChild(td);
        },
        check:function (full, chunk) {
            if (full.toLowerCase().indexOf(chunk.toLowerCase()) === -1) {
                return false;
            } else {
                return true;
            }
        },
        createTable: function(obj) {
            listTable.innerHTML='';
            for ( let item in obj){
                console.log(item);
                this.createElTr(listTable,item,obj[item]);
            }
        },
        sortObj: function(arg) {
            if(arg){
                let sort = {};
                for ( let item in this.cookies()){
                    if(this.check(item,arg) || this.check(this.cookies()[item],arg)) {
                        sort[item] = this.cookies()[item];
                    }
                }
                return sort;
            }else {
                return this.cookies();
            }

        },
    }


    filterNameInput.addEventListener('keyup', function(e) {
        let value = e.target.value.trim();
        myObj.createTable(myObj.sortObj(value));

    });

    addButton.addEventListener('click', () => {
        createCookie(addNameInput.value,addValueInput.value);
        let search = myObj.searchTable(addNameInput.value);
        if(search){
            search.children[1].innerText = addValueInput.value;
            myObj.listCookies = document.cookie.split('; ');
            myObj.createTable(myObj.sortObj(filterNameInput.value))
        }else {
            myObj.listCookies = document.cookie.split('; ');
            myObj.createTable(myObj.sortObj(filterNameInput.value))
        }
        addNameInput.value = ''
        addValueInput.value = ''
    });
    listTable.addEventListener('click',function (e) {
        if(e.target.tagName === 'BUTTON'){
            let trTable = e.target.parentNode.parentNode;
            deleteCookie(trTable.firstChild.innerText);
            trTable.remove();
        }

    })
    myObj.createTable(myObj.sortObj())
</script>
</body>
</html>